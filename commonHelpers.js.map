{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nexport async function getImages(request, page=1) {\n    const KEY = '42637407-5960a3c72fe4db0c907723fc7';\n    const BASE_URL = 'https://pixabay.com/api/';\n\n    const response = await axios.get(`${BASE_URL}?key=${KEY}&q=${request}&page=${page}&per_page=15&image_type=photo&orientation=horizontal&safesearch=true`)\n\n    return response.data;\n}\n\n\n","export function createMarkup(obj) {\n    \n    const markup = obj.hits.map(({ webformatURL: smallImg, largeImageURL: largeImg, tags, likes, views, comments, downloads }) =>\n        `<li class=\"js-list-item\"\n        <a class=\"js-list-link\" href=${largeImg} >\n\t      <img \n\t\t  class=\"js-list-image\" \n\t\t  src=${smallImg} \n\t\t  alt=${tags} \n\t\t  />\n        </a>\n        <div class=\"js-info\">\n        <p class=\"js-info-item\">Likes<span>${likes}</span></p>\n        <p class=\"js-info-item\">Views<span>${views}</span></p>\n        <p class=\"js-info-item\">Comments<span>${comments}</span></p>\n        <p class=\"js-info-item\">Downloads<span>${downloads}</span></p>\n        </div>\n        </li>`);\n        return markup.join('');\n    };    \n    \n\n","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport { getImages } from \"./js/pixabay-api\";\nimport { createMarkup } from \"./js/render-functions\";\n\n\nconst form = document.querySelector('.search-form');\nconst loaderSpan = document.querySelector('.loader');\nconst list = document.querySelector('.js-list');\nconst loadBtn = document.querySelector('.load-btn');\nlet currentPage;\nlet currentQuery;\n\nconst lightbox = new SimpleLightbox('.js-list-item', {\n    captionsData: 'alt',\n    captionDelay: 250,\n});\n\n\n\nfunction onSearch(event) {\n    event.preventDefault();\n    const query = event.target.elements.field.value.trim();\n    loaderSpan.hidden=false;\n    loadBtn.hidden=true;\n\n    if (query === \"\") {\n        loaderSpan.hidden = true;\n        list.innerHTML = null;\n        iziToast.error({\n            title: 'Error',\n            message: 'Sorry, there are no images matching your search query. Please try again!',\n            backgroundColor: '#ef4040',\n            titleColor: '#fff',\n        });\n        form.reset();\n    } else {\n       getImages(query, 1).then(data => {\n           loaderSpan.hidden = true;\n           list.innerHTML = null;\n           currentQuery = query;\n           currentPage = 1;\n           if (data.hits.length !== 0 && data.hits.length <= 14) {\n               loadBtn.hidden = true;\n               list.innerHTML = createMarkup(data);\n               lightbox.refresh();\n               const listItem = document.querySelector('.js-list-item').getBoundingClientRect();\n               const x = listItem.x * 2;\n               window.scrollBy(x, 0);\n              \n           } else if (data.hits.length > 14) {\n               loadBtn.hidden = false;\n               list.innerHTML = createMarkup(data);\n               lightbox.refresh();\n               const listItem = document.querySelector('.js-list-item').getBoundingClientRect();\n               const x = listItem.x * 2;\n               window.scrollBy(x, 0);\n           } else{\n            list.innerHTML = null;\n            iziToast.error({\n            title: 'Error',\n            message: 'Sorry, there are no images matching your search query. Please try again!',\n            backgroundColor: '#ef4040',\n            titleColor: '#fff',\n            })                \n           }\n           form.reset();\n        }).catch(error => {\n        console.log(error);\n        });\n    }\n}   \n\n\nfunction onClick() {\n    loaderSpan.hidden = false;\n    currentPage += 1;\n   \n    getImages(currentQuery, currentPage).then((data) => {\n        loaderSpan.hidden = true;\n\n        if (data.hits.length <= 14) {\n            list.insertAdjacentHTML('beforeend', createMarkup(data));\n            lightbox.refresh(); \n            loadBtn.hidden = true;\n            iziToast.info({\n                title: 'Hello',\n                message: \"We're sorry, but you've reached the end of search results.\",\n            });           \n        } else {\n            list.insertAdjacentHTML('beforeend', createMarkup(data));\n            lightbox.refresh(); \n        }\n    }).catch((err) => console.log(err));\n}\n\nform.addEventListener('submit', onSearch);\nloadBtn.addEventListener('click', onClick);\n"],"names":["getImages","request","page","KEY","BASE_URL","axios","createMarkup","obj","smallImg","largeImg","tags","likes","views","comments","downloads","form","loaderSpan","list","loadBtn","currentPage","currentQuery","lightbox","SimpleLightbox","onSearch","event","query","iziToast","data","x","error","onClick","err"],"mappings":"owBAEO,eAAeA,EAAUC,EAASC,EAAK,EAAG,CAC7C,MAAMC,EAAM,qCACNC,EAAW,2BAIjB,OAFiB,MAAMC,EAAM,IAAI,GAAGD,CAAQ,QAAQD,CAAG,MAAMF,CAAO,SAASC,CAAI,sEAAsE,GAEvI,IACpB,CCTO,SAASI,EAAaC,EAAK,CAkB1B,OAhBWA,EAAI,KAAK,IAAI,CAAC,CAAE,aAAcC,EAAU,cAAeC,EAAU,KAAAC,EAAM,MAAAC,EAAO,MAAAC,EAAO,SAAAC,EAAU,UAAAC,CAAW,IACrH;AAAA,uCAC+BL,CAAQ;AAAA;AAAA;AAAA,UAGrCD,CAAQ;AAAA,UACRE,CAAI;AAAA;AAAA;AAAA;AAAA,6CAI+BC,CAAK;AAAA,6CACLC,CAAK;AAAA,gDACFC,CAAQ;AAAA,iDACPC,CAAS;AAAA;AAAA,cAE5C,EACQ,KAAK,EAAE,CAC7B,CCXA,MAAMC,EAAO,SAAS,cAAc,cAAc,EAC5CC,EAAa,SAAS,cAAc,SAAS,EAC7CC,EAAO,SAAS,cAAc,UAAU,EACxCC,EAAU,SAAS,cAAc,WAAW,EAClD,IAAIC,EACAC,EAEJ,MAAMC,EAAW,IAAIC,EAAe,gBAAiB,CACjD,aAAc,MACd,aAAc,GAClB,CAAC,EAID,SAASC,EAASC,EAAO,CACrBA,EAAM,eAAc,EACpB,MAAMC,EAAQD,EAAM,OAAO,SAAS,MAAM,MAAM,OAChDR,EAAW,OAAO,GAClBE,EAAQ,OAAO,GAEXO,IAAU,IACVT,EAAW,OAAS,GACpBC,EAAK,UAAY,KACjBS,EAAS,MAAM,CACX,MAAO,QACP,QAAS,2EACT,gBAAiB,UACjB,WAAY,MACxB,CAAS,EACDX,EAAK,MAAK,GAEXf,EAAUyB,EAAO,CAAC,EAAE,KAAKE,GAAQ,CAK7B,GAJAX,EAAW,OAAS,GACpBC,EAAK,UAAY,KACjBG,EAAeK,EACfN,EAAc,EACVQ,EAAK,KAAK,SAAW,GAAKA,EAAK,KAAK,QAAU,GAAI,CAClDT,EAAQ,OAAS,GACjBD,EAAK,UAAYX,EAAaqB,CAAI,EAClCN,EAAS,QAAO,EAEhB,MAAMO,EADW,SAAS,cAAc,eAAe,EAAE,sBAAqB,EAC3D,EAAI,EACvB,OAAO,SAASA,EAAG,CAAC,CAEvB,SAAUD,EAAK,KAAK,OAAS,GAAI,CAC9BT,EAAQ,OAAS,GACjBD,EAAK,UAAYX,EAAaqB,CAAI,EAClCN,EAAS,QAAO,EAEhB,MAAMO,EADW,SAAS,cAAc,eAAe,EAAE,sBAAqB,EAC3D,EAAI,EACvB,OAAO,SAASA,EAAG,CAAC,CACnC,MACYX,EAAK,UAAY,KACjBS,EAAS,MAAM,CACf,MAAO,QACP,QAAS,2EACT,gBAAiB,UACjB,WAAY,MACxB,CAAa,EAEFX,EAAK,MAAK,CACrB,CAAS,EAAE,MAAMc,GAAS,CAClB,QAAQ,IAAIA,CAAK,CACzB,CAAS,CAET,CAGA,SAASC,GAAU,CACfd,EAAW,OAAS,GACpBG,GAAe,EAEfnB,EAAUoB,EAAcD,CAAW,EAAE,KAAMQ,GAAS,CAChDX,EAAW,OAAS,GAEhBW,EAAK,KAAK,QAAU,IACpBV,EAAK,mBAAmB,YAAaX,EAAaqB,CAAI,CAAC,EACvDN,EAAS,QAAO,EAChBH,EAAQ,OAAS,GACjBQ,EAAS,KAAK,CACV,MAAO,QACP,QAAS,4DACzB,CAAa,IAEDT,EAAK,mBAAmB,YAAaX,EAAaqB,CAAI,CAAC,EACvDN,EAAS,QAAO,EAE5B,CAAK,EAAE,MAAOU,GAAQ,QAAQ,IAAIA,CAAG,CAAC,CACtC,CAEAhB,EAAK,iBAAiB,SAAUQ,CAAQ,EACxCL,EAAQ,iBAAiB,QAASY,CAAO"}