{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nexport async function getImages(request, page=1) {\n    const KEY = '42637407-5960a3c72fe4db0c907723fc7';\n\n    const response = await axios.get('https://pixabay.com/api/', {\n        params: {\n            key: KEY,\n            q: request,\n            page: page,\n            image_type: \"photo\",\n            orientation: \"horizontal\",\n            safesearch: true,\n            per_page: 15,\n        }\n    });\n    return response.data;\n}\n\n\n","export function createMarkup(obj) {\n    \n    const markup = obj.hits.map(({ webformatURL: smallImg, largeImageURL: largeImg, tags, likes, views, comments, downloads }) =>\n        `<li class=\"js-list-item\"\n        <a class=\"js-list-link\" href=${largeImg} >\n\t      <img \n\t\t  class=\"js-list-image\" \n\t\t  src=${smallImg} \n\t\t  alt=${tags} \n\t\t  />\n        </a>\n        <div class=\"js-info\">\n        <p class=\"js-info-item\">Likes<span>${likes}</span></p>\n        <p class=\"js-info-item\">Views<span>${views}</span></p>\n        <p class=\"js-info-item\">Comments<span>${comments}</span></p>\n        <p class=\"js-info-item\">Downloads<span>${downloads}</span></p>\n        </div>\n        </li>`);\n        return markup.join('');\n    };    \n    \n\n","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport { getImages } from \"./js/pixabay-api\";\nimport { createMarkup } from \"./js/render-functions\";\n\n\nconst form = document.querySelector('.search-form');\nconst loaderSpan = document.querySelector('.loader');\nconst list = document.querySelector('.js-list');\nconst loadBtn = document.querySelector('.load-btn');\nlet currentPage = 1;\n\nconst lightbox = new SimpleLightbox('.js-list-item', {\n    captionsData: 'alt',\n    captionDelay: 250,\n});\n\nfunction onSearch(event) {\n    event.preventDefault();\n    const inputValue = event.target.elements.field.value;\n    loaderSpan.hidden=false;\n    loadBtn.hidden=true;\n\n    if (inputValue.trim() === \"\") {\n        loaderSpan.hidden=true;\n        iziToast.error({\n            title: 'Error',\n            message: 'Sorry, there are no images matching your search query. Please try again!',\n            backgroundColor: '#ef4040',\n            titleColor: '#fff',\n        });\n        form.reset();\n    } else {\n       getImages(inputValue).then(data => {\n           loaderSpan.hidden = true;\n        if (data.hits.length !== 0) {\n            list.innerHTML = createMarkup(data);\n            lightbox.refresh();  \n            loadBtn.hidden = false;\n            const listItem = document.querySelector('.js-list-item').getBoundingClientRect();\n            const x = listItem.x * 2;\n            window.scrollBy(x, 0);\n        } else {\n            list.innerHTML = \"\";\n            iziToast.error({\n            title: 'Error',\n            message: 'Sorry, there are no images matching your search query. Please try again!',\n            backgroundColor: '#ef4040',\n            titleColor: '#fff',\n            })                \n           }\n           form.reset();\n        }).catch(error => {\n        console.log(error);\n        });\n    }\n}   \n\nfunction onClick() {\n    loaderSpan.hidden = false;\n    getImages(currentPage).then((data) => {\n        list.insertAdjacentHTML('beforeend', createMarkup(data));\n        currentPage += 1;\n\n        if (data.totalHits > 15) {\n            loadBtn.hidden = true;\n            loaderSpan.hidden = true;\n            iziToast.error({\n              title: 'Error',\n              message: \"We're sorry, but you've reached the end of search results.\",\n              backgroundColor: '#ef4040',\n              titleColor: '#fff',\n            })\n        }\n    }).catch((err) => console.log(err));\n}\n\nform.addEventListener('submit', onSearch);\nloadBtn.addEventListener('click', onClick);\n"],"names":["getImages","request","page","KEY","axios","createMarkup","obj","smallImg","largeImg","tags","likes","views","comments","downloads","form","loaderSpan","list","loadBtn","currentPage","lightbox","SimpleLightbox","onSearch","event","inputValue","iziToast","data","x","error","onClick","err"],"mappings":"owBAEO,eAAeA,EAAUC,EAASC,EAAK,EAAG,CAC7C,MAAMC,EAAM,qCAaZ,OAXiB,MAAMC,EAAM,IAAI,2BAA4B,CACzD,OAAQ,CACJ,IAAKD,EACL,EAAGF,EACH,KAAMC,EACN,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,SAAU,EACb,CACT,CAAK,GACe,IACpB,CCjBO,SAASG,EAAaC,EAAK,CAkB1B,OAhBWA,EAAI,KAAK,IAAI,CAAC,CAAE,aAAcC,EAAU,cAAeC,EAAU,KAAAC,EAAM,MAAAC,EAAO,MAAAC,EAAO,SAAAC,EAAU,UAAAC,CAAW,IACrH;AAAA,uCAC+BL,CAAQ;AAAA;AAAA;AAAA,UAGrCD,CAAQ;AAAA,UACRE,CAAI;AAAA;AAAA;AAAA;AAAA,6CAI+BC,CAAK;AAAA,6CACLC,CAAK;AAAA,gDACFC,CAAQ;AAAA,iDACPC,CAAS;AAAA;AAAA,cAE5C,EACQ,KAAK,EAAE,CAC7B,CCXA,MAAMC,EAAO,SAAS,cAAc,cAAc,EAC5CC,EAAa,SAAS,cAAc,SAAS,EAC7CC,EAAO,SAAS,cAAc,UAAU,EACxCC,EAAU,SAAS,cAAc,WAAW,EAClD,IAAIC,EAAc,EAElB,MAAMC,EAAW,IAAIC,EAAe,gBAAiB,CACjD,aAAc,MACd,aAAc,GAClB,CAAC,EAED,SAASC,EAASC,EAAO,CACrBA,EAAM,eAAc,EACpB,MAAMC,EAAaD,EAAM,OAAO,SAAS,MAAM,MAC/CP,EAAW,OAAO,GAClBE,EAAQ,OAAO,GAEXM,EAAW,KAAM,IAAK,IACtBR,EAAW,OAAO,GAClBS,EAAS,MAAM,CACX,MAAO,QACP,QAAS,2EACT,gBAAiB,UACjB,WAAY,MACxB,CAAS,EACDV,EAAK,MAAK,GAEXd,EAAUuB,CAAU,EAAE,KAAKE,GAAQ,CAElC,GADGV,EAAW,OAAS,GACnBU,EAAK,KAAK,SAAW,EAAG,CACxBT,EAAK,UAAYX,EAAaoB,CAAI,EAClCN,EAAS,QAAO,EAChBF,EAAQ,OAAS,GAEjB,MAAMS,EADW,SAAS,cAAc,eAAe,EAAE,sBAAqB,EAC3D,EAAI,EACvB,OAAO,SAASA,EAAG,CAAC,CAChC,MACYV,EAAK,UAAY,GACjBQ,EAAS,MAAM,CACf,MAAO,QACP,QAAS,2EACT,gBAAiB,UACjB,WAAY,MACxB,CAAa,EAEFV,EAAK,MAAK,CACrB,CAAS,EAAE,MAAMa,GAAS,CAClB,QAAQ,IAAIA,CAAK,CACzB,CAAS,CAET,CAEA,SAASC,GAAU,CACfb,EAAW,OAAS,GACpBf,EAAUkB,CAAW,EAAE,KAAMO,GAAS,CAClCT,EAAK,mBAAmB,YAAaX,EAAaoB,CAAI,CAAC,EACvDP,GAAe,EAEXO,EAAK,UAAY,KACjBR,EAAQ,OAAS,GACjBF,EAAW,OAAS,GACpBS,EAAS,MAAM,CACb,MAAO,QACP,QAAS,6DACT,gBAAiB,UACjB,WAAY,MAC1B,CAAa,EAEb,CAAK,EAAE,MAAOK,GAAQ,QAAQ,IAAIA,CAAG,CAAC,CACtC,CAEAf,EAAK,iBAAiB,SAAUO,CAAQ,EACxCJ,EAAQ,iBAAiB,QAASW,CAAO"}